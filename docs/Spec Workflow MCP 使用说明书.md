# Spec Workflow MCP 使用说明书

## 1. 什么是Spec Workflow MCP

Spec Workflow MCP 是一个模型上下文协议服务器，为 AI 助手提供结构化、规范驱动的开发工具。它帮助开发者在编码前创建详细规范，跟踪实施进度，管理审批和修订，维护项目文档。

## 2. 核心价值

- **结构化开发**：遵循"需求→设计→任务"的顺序流程
- **实时进度跟踪**：通过仪表板可视化监控任务完成情况
- **完整审批流程**：支持规范文档的审查、反馈和修订
- **多界面支持**：提供Web仪表板和VSCode扩展
- **可追溯性**：所有开发决策和实施都有文档记录

## 3. 快速开始

### 3.1 安装与配置

```bash
# 添加到MCP配置
{
  "mcpServers": {
    "spec-workflow": {
      "command": "npx",
      "args": ["-y", "@pimzino/spec-workflow-mcp@latest", "/path/to/your/project"]
    }
  }
}
```

### 3.2 启动仪表板

```bash
npx -y @pimzino/spec-workflow-mcp@latest --dashboard
```

仪表板访问地址：http://localhost:5000

## 4. 真实开发场景使用指南

### 4.1 场景1：新功能开发

**目标**：开发用户认证功能

#### 步骤1：创建指导文档

```
"为我的项目创建指导文档"
```

生成三个关键文档：
- 产品指导：定义产品愿景、目标用户和核心功能
- 技术指导：确定技术栈、架构和安全要求
- 结构指导：规范项目组织和命名标准

#### 步骤2：创建规范

```
"创建用户认证的规范，包含以下功能：
- 邮箱/密码登录
- OAuth2（Google、GitHub）
- 双因素认证支持
- 密码重置流程"
```

AI 自动生成：
1. 需求文档：详细描述功能需求和验收标准
2. 设计文档：技术架构、API设计和数据模型
3. 任务列表：层次化的实施步骤

#### 步骤3：审查和批准

1. 在仪表板中查看生成的文档
2. 提供反馈或直接批准
3. 如有需要，AI 根据反馈修订文档

#### 步骤4：实施任务

```
"实施 user-auth 规范中的任务 1.2"
```

或从仪表板复制任务提示，粘贴到 AI 对话中。

#### 步骤5：跟踪进度

通过仪表板实时监控：
- 任务完成状态
- 进度百分比
- 实施日志

### 4.2 场景2：Bug修复

**目标**：修复登录超时问题

#### 步骤1：报告Bug

```
"为登录超时问题创建错误报告"
```

生成包含以下内容的Bug报告：
- Bug描述和重现步骤
- 预期与实际行为
- 优先级和严重性

#### 步骤2：分析根本原因

```
"调查bug #45的根本原因"
```

#### 步骤3：设计修复方案

```
"设计登录超时问题的修复方案"
```

#### 步骤4：实施修复

```
"实施bug #45的修复方案"
```

#### 步骤5：验证修复

```
"为bug #45创建回归测试"
```

### 4.3 场景3：代码重构

**目标**：优化数据库查询性能

#### 步骤1：记录当前状态

```
"创建记录当前数据库查询系统的规范"
```

#### 步骤2：设计改进方案

```
"设计重构以提高数据库查询性能"
```

#### 步骤3：规划迁移任务

```
"为数据库重构创建迁移任务"
```

#### 步骤4：逐步实施

```
"实施具有向后兼容性的数据库重构任务"
```

## 5. 最佳实践

### 5.1 规范创建

- 从指导文档开始，为项目建立统一方向
- 保持规范粒度适中，每个功能一个规范
- 需求文档要具体，包含验收标准
- 设计文档要详细，涵盖技术架构和数据模型

### 5.2 实施过程

- 严格按照"需求→设计→任务"的顺序进行
- 实施前完成所有文档的审批
- 按顺序完成任务，确保依赖关系正确
- 完成任务后立即更新状态

### 5.3 团队协作

- 共享仪表板URL，方便团队成员查看进度
- 使用审批注释提供具体反馈
- 保持规范更新，反映需求变化
- 归档已完成的规范，保持工作区整洁

## 6. 常见问题

### 6.1 规范变得太大怎么办？

将大规范拆分为较小的规范：

```
"将电子商务规范拆分为：
- product-catalog
- shopping-cart
- checkout-process
- order-management"
```

### 6.2 需求不明确怎么办？

请求澄清并更新需求：

```
"需求需要更多关于以下方面的详细信息：
- 用户角色和权限
- 错误处理场景
- 性能要求"
```

### 6.3 设计与需求不匹配怎么办？

请求修订设计文档：

```
"设计未解决多租户需求。请修订以包括租户隔离。"
```

## 7. 界面访问

- **Web仪表板**：http://localhost:5000
- **VSCode扩展**：从VSCode市场安装"Spec Workflow MCP"

## 8. 命令参考

- 创建规范：`"创建[功能名称]的规范"`
- 列出规范：`"列出我所有的规范"`
- 实施任务：`"实施[规范名称]规范中的任务[任务编号]"`
- 报告Bug：`"创建[问题描述]的错误报告"`
- 归档规范：`"归档已完成的[规范名称]规范"`

## 9. 工作流程总结

```
指导文档 → 规范创建 → 审查批准 → 实施任务 → 验证测试
```

通过遵循这个结构化流程，Spec Workflow MCP 帮助开发者提高开发效率，减少返工，确保项目质量和可维护性。