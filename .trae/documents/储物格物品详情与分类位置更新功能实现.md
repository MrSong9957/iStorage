# 储物格物品详情与分类位置更新功能实现

## 一、功能需求分析
1. **储物格物品可点击**：储物格包含的物品应可点击查看详情
2. **详情窗口分类下拉**：提供所有物品种类的下拉选择
3. **详情窗口位置下拉**：提供所有储物格的下拉选择，按房间、家具、储物格顺序排列
4. **分类和位置更新**：实现分类和位置的更新功能

## 二、实现步骤

### 1. 修改储物格模块，使包含的物品可点击
- **文件**：`templates/items/find_items.html`
- **修改**：将储物格包含的物品文本改为可点击的物品卡片，添加与其他物品卡片相同的数据属性和点击事件

### 2. 更新详情窗口，添加分类和位置下拉菜单
- **文件**：`templates/items/find_items.html`
- **修改**：
  - 将分类静态文本改为下拉选择框
  - 将位置静态文本改为下拉选择框
  - 添加保存分类和位置的按钮

### 3. 在视图中获取所有分类和位置数据
- **文件**：`apps/items/views.py`
- **修改**：
  - 在`find_items`视图中获取所有储物格，并按房间、家具、储物格排序
  - 将分类选项和排序后的储物格传递给模板

### 4. 实现分类和位置更新的API
- **文件**：`apps/items/views.py`
- **修改**：
  - 添加`update_item_category`视图，处理分类更新
  - 添加`update_item_location`视图，处理位置更新

### 5. 更新URL配置
- **文件**：`apps/items/urls.py`
- **修改**：添加分类和位置更新的URL路径

### 6. 添加前端JavaScript逻辑
- **文件**：`templates/items/find_items.html`
- **修改**：
  - 添加分类和位置下拉菜单的数据填充逻辑
  - 添加分类和位置更新的AJAX请求处理
  - 添加保存按钮的点击事件

## 三、技术要点
1. **储物格排序**：使用Django ORM的`order_by`实现按房间、家具、储物格排序
2. **AJAX更新**：使用Fetch API实现异步更新分类和位置
3. **下拉菜单数据**：在模板中使用Django模板标签动态生成下拉选项
4. **事件处理**：确保新添加的物品卡片也能触发详情模态窗口

## 四、预期效果
1. 储物格包含的物品可点击查看详情
2. 详情窗口中分类和位置显示为下拉菜单
3. 位置下拉菜单按房间、家具、储物格顺序排列
4. 点击保存按钮可更新物品的分类和位置
5. 更新后页面无需刷新，直接显示最新数据

## 五、文件修改清单
- `apps/items/views.py`：添加分类和位置更新视图，修改find_items视图
- `apps/items/urls.py`：添加分类和位置更新的URL路径
- `templates/items/find_items.html`：修改储物格物品显示，更新详情窗口UI，添加JavaScript逻辑