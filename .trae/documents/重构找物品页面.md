## 重构找物品页面计划

### 1. 分析当前页面结构

* **base\_template.html**：导航栏包含logo和用户菜单/登录链接，内容区域使用mt-4间距

* **find\_items.html**：包含搜索框、搜索结果、最近存放、按分类查看、储物格等部分

### 2. 重构目标

* 将搜索框移到导航栏

* 添加3个可点击切换的标签：最近浏览、分类、储物格

* 仅修改前端，后端不动

* 保持极简主义设计原则

### 3. 具体修改方案

#### 3.1 修改 base\_template.html

* 在导航栏中添加搜索框，使用条件渲染，只在find\_items页面显示

* 调整导航栏布局，使用flex布局确保搜索框和其他元素合理排列

* 搜索框样式保持与原设计一致，使用rounded-xl和蓝色主题

#### 3.2 修改 find\_items.html

* 移除页面中的搜索框（已移到导航栏）

* 添加标签切换组件，包含"最近浏览"、"分类"、"储物格"三个标签

* 将"最近存放"内容放入"最近浏览"标签面板

* 将"按分类查看"内容放入"分类"标签面板

* 将"储物格"内容放入"储物格"标签面板

* 搜索结果保持在标签上方，始终显示

#### 3.3 添加标签切换功能

* 使用JavaScript实现标签切换逻辑

* 点击标签时，显示对应的内容面板，隐藏其他面板

* 为当前激活的标签添加高亮样式

* 保持平滑过渡效果

### 4. 技术实现细节

#### 4.1 导航栏搜索框

```html
<!-- 在导航栏中间添加搜索框 -->
<div class="flex-1 mx-4 hidden md:block">
    <form method="GET" action="{% url 'items:find_items' %}" class="flex gap-2">
        <input type="text" name="q" placeholder="搜索物品..." value="{{ search_query }}" 
               class="flex-1 px-4 py-2 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all text-sm">
        <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded-xl hover:bg-blue-700 transition-colors text-sm">
            搜索
        </button>
    </form>
</div>
```

#### 4.2 标签切换组件

```html
<!-- 标签切换 -->
<div class="flex border-b border-gray-200 mb-6">
    <button class="tab-btn active px-4 py-2 text-sm font-medium text-blue-600 border-b-2 border-blue-600" data-tab="recent">
        最近浏览
    </button>
    <button class="tab-btn px-4 py-2 text-sm font-medium text-gray-500 hover:text-blue-600 transition-colors" data-tab="category">
        分类
    </button>
    <button class="tab-btn px-4 py-2 text-sm font-medium text-gray-500 hover:text-blue-600 transition-colors" data-tab="storage">
        储物格
    </button>
</div>

<!-- 标签内容面板 -->
<div id="recent" class="tab-content block">
    <!-- 最近浏览内容 -->
</div>
<div id="category" class="tab-content hidden">
    <!-- 分类内容 -->
</div>
<div id="storage" class="tab-content hidden">
    <!-- 储物格内容 -->
</div>
```

#### 4.3 JavaScript切换逻辑

```javascript
// 标签切换功能
const tabBtns = document.querySelectorAll('.tab-btn');
const tabContents = document.querySelectorAll('.tab-content');

tabBtns.forEach(btn => {
    btn.addEventListener('click', () => {
        const targetTab = btn.dataset.tab;
        
        // 更新按钮状态
        tabBtns.forEach(b => {
            b.classList.remove('active', 'text-blue-600', 'border-blue-600');
            b.classList.add('text-gray-500');
        });
        btn.classList.add('active', 'text-blue-600', 'border-blue-600');
        btn.classList.remove('text-gray-500');
        
        // 显示对应内容
        tabContents.forEach(content => {
            content.classList.add('hidden');
        });
        document.getElementById(targetTab).classList.remove('hidden');
    });
});
```

### 5. 预期效果

* 搜索框移到导航栏，节省页面空间

* 页面内容通过标签切换，结构更清晰

* 保持原有设计风格，符合极简主义原则

* 提高用户体验，方便快速切换不同内容视图

### 6. 实施步骤

1. 修改 base\_template.html，添加导航栏搜索框
2. 修改 find\_items.html，移除页面搜索框
3. 在 find\_items.html 中添加标签切换组件
4. 将内容分配到对应的标签面板
5. 添加标签切换的JavaScript逻辑
6. 测试页面效果，确保功能正常

### 7. 注意事项

* 确保搜索功能在所有页面都能正常工作

* 保持响应式设计，在移动端搜索框显示合理

* 标签切换动画平滑，用户体验良好

* 不影响其他页面的功能和样式

