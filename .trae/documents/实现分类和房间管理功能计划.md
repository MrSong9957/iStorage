# 实现分类和房间管理功能计划

## 目标
实现分类和房间的管理功能，包括添加、修改、删除分类和房间，符合苹果设计风格和极简主义设计。

## 问题分析

当前系统已经有分类模型和相关的API，但缺少一个统一的管理界面来管理所有的分类和房间。用户希望通过侧边栏的"⚙️管理分类"链接访问这个管理界面。

## 实现步骤

### 1. 创建管理分类和房间的视图函数

* 文件：`apps/items/views.py`

* 功能：
  - 获取用户的所有分类
  - 获取用户的所有房间
  - 处理分类的增删改查
  - 处理房间的增删改查
  - 确保每用户独立的数据

### 2. 创建管理分类和房间的模板

* 文件：`templates/items/manage_categories.html`

* 功能：
  - 显示分类列表和房间列表
  - 提供添加、修改、删除分类的功能
  - 提供添加、修改、删除房间的功能
  - 符合苹果设计风格和极简主义设计
  - 响应式布局

### 3. 更新URL配置

* 文件：`apps/items/urls.py`

* 功能：
  - 添加管理分类和房间的URL
  - 确保URL符合RESTful规范

### 4. 更新侧边栏链接

* 文件：`templates/items/find_items.html`

* 功能：
  - 更新侧边栏链接，指向新的管理页面
  - 确保链接样式符合设计要求

### 5. 实现分类和房间的增删改查功能

* 功能：
  - 添加分类
  - 修改分类
  - 删除分类
  - 添加房间
  - 修改房间
  - 删除房间
  - 确保数据的一致性和完整性

## 技术实现细节

### 视图函数设计

```python
@login_required
def manage_categories(request):
    """管理分类和房间视图"""
    # 获取用户的所有分类
    categories = Category.objects.filter(user=request.user)
    
    # 获取用户的所有房间
    rooms = Item.objects.filter(user=request.user).values_list('location', flat=True).distinct().exclude(location__isnull=True).exclude(location='')
    
    # 处理POST请求
    if request.method == 'POST':
        # 处理分类和房间的增删改查
        # ...
    
    return render(request, 'items/manage_categories.html', {
        'categories': categories,
        'rooms': rooms
    })
```

### 模板设计

* 采用苹果设计风格和极简主义设计
* 响应式布局
* 卡片式设计
* 现代化的表单元素
* 简洁的操作按钮

### URL配置

```python
# 添加管理分类和房间的URL
path('manage/', views.manage_categories, name='manage_categories'),
```

### 侧边栏链接更新

```html
<li class="nav-item">
    <a href="{% url 'items:manage_categories' %}" class="nav-link">
        <span class="nav-text">⚙️管理分类</span>
    </a>
</li>
```

## 注意事项

1. 只修改必要的代码，不影响其他功能
2. 保持苹果设计风格和极简主义设计
3. 遵循Django最佳实践
4. 确保现有数据的兼容性
5. 编写最简单、最容易理解且极致简洁的代码
6. 确保每用户独立的数据

## 预期效果

* 用户可以通过侧边栏的"⚙️管理分类"链接访问管理界面
* 管理界面显示所有的分类和房间
* 用户可以添加、修改、删除分类和房间
* 界面符合苹果设计风格和极简主义设计
* 响应式布局，适配不同设备

## 测试计划

1. 访问管理分类页面
2. 添加新分类
3. 修改分类
4. 删除分类
5. 添加新房间
6. 修改房间
7. 删除房间
8. 测试不同设备的响应式布局

## 技术栈

* Django 4.2
* HTML/CSS/JavaScript
* Tailwind CSS（可选，用于快速构建现代化界面）
* Font Awesome（可选，用于图标）

## 文件结构

```
apps/items/
├── views.py          # 视图函数
├── urls.py           # URL配置
└── templates/items/
    ├── manage_categories.html  # 管理分类和房间模板
```