# 修复二维码显示错误计划

## 问题分析
1. **数据库状态**：所有3个物品都有二维码数据（base64编码）
2. **前端问题**：当前模板使用JavaScript动态生成二维码，而不是直接使用数据库中存储的二维码数据
3. **数据完整性问题**：有一个物品的item_code为None，可能导致动态生成的二维码无效

## 修复方案

### 1. 修复前端二维码显示逻辑
- **修改文件**：`templates/items/find_items.html`
- **修复内容**：
  - 在物品卡片的data属性中添加二维码数据
  - 修改模态窗口的二维码显示逻辑，直接使用数据库中的二维码数据
  - 移除动态生成二维码的代码，提高性能

### 2. 修复物品创建时的二维码生成
- **修改文件**：`apps/items/views.py`
- **修复内容**：
  - 在`deposit_item`视图中添加二维码生成逻辑
  - 在`ItemCreateView.form_valid`方法中添加二维码生成逻辑
  - 确保所有新创建的物品自动生成二维码

### 3. 修复tag_view中的物品创建逻辑
- **修改文件**：`apps/items/views.py`
- **修复内容**：
  - 在tag_view的save_tag分支中，为新创建的物品生成二维码

### 4. 确保物品编号生成
- **检查文件**：`apps/items/models.py`
- **修复内容**：确保item_code字段有默认值或在创建时必须生成

## 修复步骤
1. 先修改前端模板，使用数据库中的二维码数据
2. 然后修改后端视图，确保新创建的物品自动生成二维码
3. 测试修复效果

## 预期效果
- 二维码正确显示，使用数据库中存储的二维码数据
- 新创建的物品自动生成二维码
- 提高页面加载性能，减少客户端计算
- 保持极简主义设计风格

## 技术要点
- 使用base64编码直接渲染图片
- 移除不必要的JavaScript代码
- 确保数据完整性
- 保持代码简洁高效