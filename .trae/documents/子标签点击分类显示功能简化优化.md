# 子标签点击分类显示功能简化优化

## 问题分析
当前代码结构复杂，存在以下问题：
1. 有两个独立的DOMContentLoaded事件监听器，导致事件处理逻辑分散
2. 分类标签点击功能与其他功能分离，增加了代码复杂度
3. 物品过滤和物品组可见性检查逻辑可以进一步简化
4. 代码结构不够清晰，不符合极简主义设计原则

## 解决方案
简化代码结构，整合事件监听器，优化过滤逻辑，使用最少的代码实现功能。

## 实现步骤

1. **整合DOMContentLoaded事件监听器**：
   - 将分类标签点击功能整合到主DOMContentLoaded事件监听器中
   - 减少事件监听器数量，简化代码结构
   - 提高代码的可维护性和可读性

2. **优化物品过滤和物品组可见性检查逻辑**：
   - 简化物品过滤逻辑，减少不必要的代码
   - 优化物品组可见性检查，提高性能
   - 移除冗余代码，保持代码简洁

3. **使用事件委托或直接绑定**：
   - 保持直接绑定的方式，但将事件监听器整合到主DOMContentLoaded事件监听器中
   - 确保代码结构清晰，逻辑简单

4. **测试功能**：
   - 点击不同标签，验证只有包含匹配物品的物品组会显示
   - 点击"全部"标签，验证所有物品组和物品会显示
   - 切换过滤类型（房间/分类），验证标签过滤功能正常

## 预期效果
- 代码结构更加清晰，符合极简主义设计原则
- 功能正常工作，点击标签可以正确过滤物品
- 只显示包含匹配物品的物品组
- 提高代码的可维护性和可读性

## 技术要点
- 整合事件监听器，减少代码复杂度
- 简化物品过滤和物品组可见性检查逻辑
- 保持代码结构清晰自然
- 遵循苹果设计风格和极简主义原则
- 确保对现有数据的完全兼容性

## 代码优化要点
- 使用最少的代码实现功能
- 避免复杂嵌套
- 遵循Django最佳实践
- 保持代码的可维护性
- 确保功能完整性