## 问题分析

1. **间距问题**：
   - 当前 `find-layout` 类使用 `gap: var(--spacing-lg)`（32px）来设置侧边栏和主内容区之间的间距
   - 用户要求缩小这个间距，使其更符合苹果设计风格的极简主义

2. **子标签筛选问题**：
   - 当前侧边栏中的子标签（如"书籍"、"办公用品"等）的 `data-tag` 属性为空
   - 点击这些标签时，标签激活状态会更新，但不会筛选显示对应的数据列表
   - 标签点击事件处理函数已经存在，但由于 `data-tag` 属性为空，无法正确匹配对应的物品组

## 修复方案

1. **缩小侧边栏和主内容区间距**：
   - 修改 `custom.css` 中的 `find-layout` 类，将 `gap` 值从 `var(--spacing-lg)` 改为 `var(--spacing-sm)`（16px）

2. **修复子标签筛选功能**：
   - 修改 `sidebar.html` 中的标签生成代码，确保 `data-tag` 属性与对应的物品组 `data-group` 匹配
   - 确保 `data-tag` 属性使用 `slugify` 过滤器处理，与物品组的 `data-group` 属性保持一致

3. **优化标签点击事件处理**：
   - 确保标签点击事件处理函数正确工作，只显示匹配的数据列表
   - 优化筛选逻辑，提高性能

## 修复代码

### 1. 修改 `custom.css`

```css
.find-layout {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-sm);  /* 从 var(--spacing-lg) 改为 var(--spacing-sm) */
  background-color: var(--bg);
  font-family: var(--font-sans);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  box-sizing: border-box;
  width: 100%;
}
```

### 2. 修改 `sidebar.html`

```html
<!-- 动态生成分类标签 -->
{% if filter_type == 'room' %}
    {% for room in all_rooms %}
        <li class="tag-item" data-tag="{{ room|slugify }}">
            <a href="#" class="tag-link">{{ room }}</a>
        </li>
    {% endfor %}
{% else %}
    {% for category in all_categories %}
        <li class="tag-item" data-tag="{{ category|slugify }}">
            <a href="#" class="tag-link">{{ category }}</a>
        </li>
    {% endfor %}
{% endif %}
```

## 预期效果

1. **间距效果**：
   - 侧边栏和主内容区之间的间距从32px缩小到16px
   - 更符合苹果设计风格的极简主义
   - 页面布局更加紧凑，视觉效果更好

2. **子标签筛选效果**：
   - 点击子标签时，只显示该标签下的数据列表
   - 标签激活状态正确更新
   - 筛选逻辑正确，性能优良

## 风险评估

- 低风险：仅修改了CSS样式和模板代码，不影响其他功能
- 符合苹果设计风格与极简主义原则
- 严格遵循Django最佳实践
- 对现有数据完全兼容，无需数据迁移

## 执行步骤

1. 修改 `custom.css` 中的 `find-layout` 类，缩小侧边栏和主内容区之间的间距
2. 修改 `sidebar.html` 中的标签生成代码，确保 `data-tag` 属性与对应的物品组 `data-group` 匹配
3. 验证修复后的效果，确保间距缩小和子标签筛选功能正常工作
4. 测试其他功能模块，确保修复不会影响其他功能

## 兼容性检查

- 对现有数据无影响，无需数据迁移
- 保留了所有核心功能代码
- 与现有代码完全兼容
- 支持所有浏览器和设备

