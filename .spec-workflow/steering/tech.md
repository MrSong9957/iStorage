# 技术指导文档

## 1. 技术栈

### 1.1 核心技术
- **后端框架**：Django 4.2+
- **数据库**：SQLite（开发环境），PostgreSQL/MySQL（生产环境）
- **前端技术**：HTML5, CSS3, JavaScript (ES6+)
- **样式库**：Tailwind CSS v3（通过CDN引入）
- **图标库**：Font Awesome 6
- **二维码生成**：qrcode.js 库

### 1.2 依赖管理
- **包管理**：pip + requirements.txt
- **虚拟环境**：Python venv

### 1.3 开发工具
- **IDE推荐**：PyCharm, VS Code
- **版本控制**：Git

## 2. 架构设计

### 2.1 系统架构
- **采用架构**：Django MVT（模型-视图-模板）架构
- **模块化设计**：基于Django应用的模块化结构
- **静态文件处理**：Django内置静态文件管理系统
- **媒体文件处理**：Django媒体文件存储

### 2.2 目录结构
- **apps/**：包含所有Django应用（items, users等）
- **config/**：项目配置文件（settings, urls, wsgi等）
- **templates/**：HTML模板文件，按应用分类
- **static/**：静态资源文件（CSS, JS, 字体等）
- **media/**：用户上传的媒体文件
- **docs/**：项目文档
- **scripts/**：辅助脚本工具

### 2.3 应用划分
- **items**：物品和储物管理核心功能
- **users**：用户认证和管理

## 3. 数据模型设计

### 3.1 核心模型
- **Item**：物品信息模型
- **Storage**：储物格信息模型
- **Category**：物品分类模型
- **Location**：位置信息模型（房间、区域等）
- **User**：用户信息模型（基于Django内置用户模型）

### 3.2 关系设计
- 一个储物格可存放多个物品
- 一个分类可包含多个物品
- 一个位置可包含多个储物格
- 用户与物品和储物格存在所有权关系

## 4. 安全策略

### 4.1 认证与授权
- 使用Django内置的认证系统
- 基于视图的访问控制（login_required装饰器）
- 安全的密码存储（bcrypt加密）

### 4.2 数据安全
- SQL注入防护（使用Django ORM）
- XSS防护（Django模板自动转义）
- CSRF防护（Django内置）
- 输入验证（Django表单验证）

### 4.3 敏感信息保护
- 环境变量管理（.env文件）
- 避免在代码中硬编码敏感信息
- 日志记录中排除敏感数据

## 5. 性能优化

### 5.1 数据库优化
- 合理设计索引
- 使用select_related和prefetch_related优化查询
- 避免N+1查询问题

### 5.2 缓存策略
- 视图缓存
- 模板片段缓存
- 静态文件缓存

### 5.3 前端优化
- 延迟加载非关键资源
- 优化静态资源大小
- 减少HTTP请求次数

## 6. 开发与部署

### 6.1 开发环境配置
- 使用虚拟环境隔离依赖
- 环境变量管理（.env文件）
- 数据库迁移管理

### 6.2 测试策略
- 单元测试（Django test framework）
- 集成测试
- 手动功能测试

### 6.3 部署方案
- **开发环境**：本地开发服务器
- **生产环境**：推荐使用Gunicorn/uWSGI + Nginx
- **数据库**：生产环境使用PostgreSQL或MySQL
- **静态文件服务**：使用Nginx或CDN

## 7. 扩展性考虑

### 7.1 API设计
- 遵循RESTful设计原则
- 为未来的移动端或第三方集成预留API接口

### 7.2 第三方集成
- 支持与云存储服务集成（可选）
- 支持与智能家居设备集成（可选）

### 7.3 功能扩展
- 模块化设计便于添加新功能
- 预留插件系统接口（可选）